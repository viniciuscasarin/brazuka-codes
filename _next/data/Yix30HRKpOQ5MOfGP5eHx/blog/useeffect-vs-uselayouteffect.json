{"pageProps":{"postMetadata":{"title":"useEffect vs useLayoutEffect","description":"Ambos fazem basicamente a mesma coisa, mas eles têm aplicações levemente diferentes. Então, eis alguns pontos para levar em consideração ao decidir qual React Hook usar.","date":"Jan 08, 2022","author":"Kent C. Dodds","authorUrl":"https://kentcdodds.com/","originalTitle":"useEffect vs useLayoutEffect","originalUrl":"https://kentcdodds.com/blog/useeffect-vs-uselayouteffect","translator":"Vinícius Casarin","translatorUrl":"https://www.linkedin.com/in/vinicius-casarin-664315182/","keywords":["frontend","react","javascript","react hooks"],"id":"useeffect-vs-uselayouteffect"},"postContent":{"compiledSource":"var d=Object.defineProperty,i=Object.defineProperties;var l=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var c=(a,o,n)=>o in a?d(a,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[o]=n,e=(a,o)=>{for(var n in o||(o={}))r.call(o,n)&&c(a,n,o[n]);if(t)for(var n of t(o))p.call(o,n)&&c(a,n,o[n]);return a},m=(a,o)=>i(a,l(o));var u=(a,o)=>{var n={};for(var s in a)r.call(a,s)&&o.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&t)for(var s of t(a))o.indexOf(s)<0&&p.call(a,s)&&(n[s]=a[s]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var s=n,{components:a}=s,o=u(s,[\"components\"]);return mdx(MDXLayout,m(e(e({},layoutProps),o),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{id:\"useeffect-vs-uselayouteffect\"}),\"useEffect vs useLayoutEffect\"),mdx(\"p\",null,`Ambos fazem basicamente a mesma coisa, mas eles t\\xEAm aplica\\xE7\\xF5es levemente diferentes.\nEnt\\xE3o, eis alguns pontos para levar em considera\\xE7\\xE3o ao decidir qual `,mdx(\"em\",{parentName:\"p\"},mdx(\"a\",e({parentName:\"em\"},{href:\"https://reactjs.org/hooks\"}),\"React Hook\")),\" usar.\"),mdx(\"h2\",e({},{id:\"useeffect\"}),mdx(\"a\",e({parentName:\"h2\"},{href:\"#useeffect\"}),\"useEffect\")),mdx(\"p\",null,\"Esse \\xE9 o que voc\\xEA vai usar a 99% das vezes. Ao refatorar um \",mdx(\"em\",{parentName:\"p\"},\"class component\"),\" para utilizar \",mdx(\"em\",{parentName:\"p\"},\"hooks\"),`,\nvoc\\xEA provavelmente ir\\xE1 mover qualquer trecho de c\\xF3digo de um `,mdx(\"strong\",{parentName:\"p\"},\"componentDidMount\"),\", \",mdx(\"strong\",{parentName:\"p\"},\"componentDidUpdate\"),\", e \",mdx(\"strong\",{parentName:\"p\"},\"componentWillUnmount\"),` para um\n`,mdx(\"strong\",{parentName:\"p\"},\"useEffect\"),\".\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"O ponto de aten\\xE7\\xE3o\"),\" \\xE9 que ele roda \",mdx(\"em\",{parentName:\"p\"},\"depois\"),` que o react renderiza seu componente\ne garante que seu c\\xF3digo n\\xE3o ir\\xE1 bloquear a renderiza\\xE7\\xE3o do browser. Isso se diferencia\ndo comportamento em `,mdx(\"em\",{parentName:\"p\"},\"class components\"),\" onde \",mdx(\"strong\",{parentName:\"p\"},\"componentDidMount\"),\" e \",mdx(\"strong\",{parentName:\"p\"},\"componentDidUpdate\"),`\nrodam de forma s\\xEDncrona ap\\xF3s a renderiza\\xE7\\xE3o. Se fazendo mais perform\\xE1tico e quase sempre \\xE9\no que voc\\xEA precisa.`),mdx(\"p\",null,\"No entanto, caso seu c\\xF3digo v\\xE1 alterar o DOM (via uma \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://pt-br.reactjs.org/docs/refs-and-the-dom.html\"}),\"Ref\"),`)\n`,mdx(\"strong\",{parentName:\"p\"},\"e\"),` tal altera\\xE7\\xE3o for mudar a apar\\xEAncia do DOM entre o tempo que ele \\xE9 renderizado e seu c\\xF3digo executado,\n`,mdx(\"strong\",{parentName:\"p\"},\"voc\\xEA n\\xE3o deve\"),\" usar o \",mdx(\"strong\",{parentName:\"p\"},\"useEffect\"),`. Ou sen\\xE3o, \\xE9 capaz que o usu\\xE1rio vejam uma tremidinha no seu layout,\nesse \\xE9 basicamente o \\xFAnico caso que voc\\xEA deve usar o `,mdx(\"strong\",{parentName:\"p\"},\"useLayoutEffect\"),\".\"),mdx(\"h2\",e({},{id:\"uselayouteffect\"}),mdx(\"a\",e({parentName:\"h2\"},{href:\"#uselayouteffect\"}),\"useLayoutEffect\")),mdx(\"p\",null,`Este roda de forma s\\xEDncrona imediatamente ap\\xF3s o React ter realizado todas as altera\\xE7\\xF5es no DOM.\nPode ser \\xFAtil se voc\\xEA precisar calcular valores do DOM (como pegar a posi\\xE7\\xE3o do scroll ou outros estilos de um elemento)\ne alterar o DOM com base nelas, `,mdx(\"strong\",{parentName:\"p\"},\"ou\"),\" fazer um re-render s\\xEDncrono atualizando o \",mdx(\"em\",{parentName:\"p\"},\"state\"),\".\"),mdx(\"p\",null,\"Quanto ao ciclo de vida, ele funciona da mesma forma que \",mdx(\"strong\",{parentName:\"p\"},\"componentDidMount\"),\" e \",mdx(\"strong\",{parentName:\"p\"},\"componentDidUpdate\"),`.\nO c\\xF3digo ir\\xE1 rodar assim que o DOM for atualizado, mas antes que o browser consiga mostrar na tela (o\nusu\\xE1rio geralmente n\\xE3o nota uma atualiza\\xE7\\xE3o at\\xE9 que o browser mostre-a).`),mdx(\"h2\",e({},{id:\"resumo\"}),mdx(\"a\",e({parentName:\"h2\"},{href:\"#resumo\"}),\"Resumo\")),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"useLayoutEffect:\"),\" Caso voc\\xEA \",mdx(\"strong\",{parentName:\"li\"},\"precise\"),\" alterar diretamente o DOM e/ou precise calcular algum valor dele.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"useEffect:\"),\" Caso voc\\xEA n\\xE3o precise interagir com o DOM.\")),mdx(\"h2\",e({},{id:\"um-caso-fora-da-curva\"}),mdx(\"a\",e({parentName:\"h2\"},{href:\"#um-caso-fora-da-curva\"}),\"Um caso fora da curva\")),mdx(\"p\",null,\"Uma outra situa\\xE7\\xE3o em que voc\\xEA talvez precise utilizar o \",mdx(\"strong\",{parentName:\"p\"},\"useLayoutEffect\"),`\n\\xE9 se voc\\xEA estiver utilizando um valor (como um `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://pt-br.reactjs.org/docs/refs-and-the-dom.html\"}),\"Ref\"),`) e voc\\xEA\nprecisar ter certeza que seu valor esteja atualizado antes que qualquer coisa rode. Por exemplo:`),mdx(\"pre\",e({},{className:\"language-js\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token keyword\"}),\"const\"),\" ref \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"React\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token method function property-access\"}),\"useRef\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"React\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token method function property-access\"}),\"useEffect\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token arrow operator\"}),\"=>\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  ref`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token property-access\"}),\"current\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Um valor\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// Ent\\xE3o, em outro trecho do seu c\\xF3digo\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token maybe-class-name\"}),\"React\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token method function property-access\"}),\"useLayoutEffect\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token arrow operator\"}),\"=>\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"token console class-name\"}),\"console\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token method function property-access\"}),\"log\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"ref\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token property-access\"}),\"current\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"// <-- Isso loga o valor antigo, pq roda antes!\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\";\"),`\n`)),mdx(\"p\",null,\"Nesse caso, a solu\\xE7\\xE3o \\xE9 usar o \",mdx(\"strong\",{parentName:\"p\"},\"useLayoutEffect\"),\".\"),mdx(\"h2\",e({},{id:\"conclus\\xE3o\"}),mdx(\"a\",e({parentName:\"h2\"},{href:\"#conclusao\"}),\"Conclus\\xE3o\")),mdx(\"p\",null,`O comportamento padr\\xE3o \\xE9 deixar que as atualiza\\xE7\\xF5es do browser sejam ditadas pelo DOM\nantes do seu c\\xF3digo ser executado. Isso significa que seu c\\xF3digo n\\xE3o ir\\xE1 bloquear o browser\ne o usu\\xE1rio ver\\xE1 as altera\\xE7\\xF5es mais r\\xE1pido. Ent\\xE3o utilize o `,mdx(\"inlineCode\",{parentName:\"p\"},\"useEffect\"),\" na maioria das vezes.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"id":"useeffect-vs-uselayouteffect"},"__N_SSG":true}